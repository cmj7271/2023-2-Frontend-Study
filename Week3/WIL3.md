# Week3

---

이번 실습은 todo 리스트 만들기였다.  

todo 리스트를 만들기 위해서는

- 새로운 html 태그 생성
- 태그 삽입
- 태그 제거

의 기능을 구현해야 했다.

이를 위해서 javascript의 문서 제어 API DOM(Document Object Model) 을 공부하였다.  

DOM은 문서의 내용을 트리의 형태로 저장한다.  
이 트리에 새로운 요소를 추가, 제거 하는 형식으로 html을 동적으로 변경가능하다.

이러한 제거, 추가에 대한 함수를 이벤트 처리기에 등록함으로써 html에서의 이벤트에 따른 변화를 줄 수 있다.  

## 시행착오

---

처음에는 `onclick` 에 이벤트 처리기를 등록하는 방식으로 구현하고자 했다.  
또한, todo 혹은 done 목록이 생성될 때마다, 전역변수 `todo_cnt` , `done_cnt` 를 활용해 서로 구별되는 id 를 부여하고자 했다. 이를 통해 특정 목록에 대한 접근을 용이하게 하고자 했다.

하지만, 생각보다 id 에 따라 내가 원하는 노드를 선택하지 못하자 다른 방법을 시도하고자 했다.

`click` 에 이벤트를 등록할 때, 등록된 태그의 근처가 대상이라는 것을 떠올리고,  
`this` 를 활용하고자 했다. 이를 통한 방법은 어느정도는 성공했으나,  
일부 버그가 존재했고, 정보를 찾다보니, `click` 에 직접 등록하기보다는  
`addEventListener` 를 통한 등록을 권장한다고 하기에 다시 고치기로 했다.  
`addEventListener` 를 활용하면, 이벤트 객체를 활용할 수 있다는 점도 활용해서,  
`this` 를 사용하지 않고, 이벤트 객체를 활용하는 방법으로 변경했다.

또한 이와 별개로, 처음에 `window.onload` 에 초기설정이라 생각한 html 요소들 변수에 저장 및 이벤트 처리기를 등록하고, `window.onload` 바깥에 필요한 함수들을 구현했는데,  
이 함수들을 `var name = function() {};` 형식을 사용했었다.  
하지만 이 방법은 함수 호이스팅이 일어나지 않기 때문에, 내가 원하는대로 작동하지 않을 수 있다.  
이에 함수 구현을 모두 `function name() {};` 의 형식으로 바꾸어주었다.

어느정도는 작동하는 듯 하나, 요소를 여러개 만들고 제거하다보면 어느 순간부터 원하는 동작을 하지 않는다…